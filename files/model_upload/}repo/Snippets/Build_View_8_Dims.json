{
  "snippetId": "Build_View_8_Dims",
  "name": "Build view with 8 dimensions",
  "description": "This builds a view using mdx for a cube with 8 dimensions.",
  "auxiliaryVariables": [
    "ViewName",
    "SubName",
    "dim1",
    "mdx1",
    "dim2",
    "mdx2",
    "dim3",
    "mdx3",
    "dim4",
    "mdx4",
    "dim5",
    "mdx5",
    "dim6",
    "mdx6",
    "dim7",
    "mdx7",
    "dim8",
    "mdx8",
    "sCubeName",
    "nTmp"
  ],
  "variables": [
    {
      "variableName": "sCubeName",
      "description": "Cube to create view of.",
      "valueDefinition": {
        "type": "CUB",
        "defaultVal": null
      }
    },
    {
      "variableName": "nTmp",
      "description": "Make view temporary? 0/1",
      "valueDefinition": {
        "type": "NUMERIC",
        "defaultVal": null
      }
    }
  ],
  "script": [
    "vName:sCubeName = 'vValue:sCubeName';",
    "vName:nTmp = vValue:nTmp;",
    "aux:ViewName = GetProcessName | numbertostring(now());",
    "aux:SubName = aux:ViewName;",
    "if(ViewExists( vName:sCubeName, aux:ViewName )=1);",
    "    ViewDestroy( vName:sCubeName, aux:ViewName );",
    "endif;",
    "ViewCreate( vName:sCubeName, aux:ViewName, vName:nTmp);",
    "aux:dim1 = TABDIM( vName:sCubeName, 1 );",
    "aux:mdx1 = '{TM1FILTERBYLEVEL(TM1SUBSETALL(['|aux:dim1|'].['|aux:dim1|']) , 0)}';",
    "aux:dim2 = TABDIM( vName:sCubeName, 2 );",
    "aux:mdx2 = '{TM1FILTERBYLEVEL(TM1SUBSETALL(['|aux:dim2|'].['|aux:dim2|']) , 0)}';",
    "aux:dim3 = TABDIM( vName:sCubeName, 3 );",
    "aux:mdx3 =  '{TM1FILTERBYLEVEL(TM1SUBSETALL(['|aux:dim3|'].['|aux:dim3|']) , 0)}';",
    "aux:dim4 = TABDIM( vName:sCubeName, 4 );",
    "aux:mdx4 =  '{TM1FILTERBYLEVEL(TM1SUBSETALL(['|aux:dim4|'].['|aux:dim4|']) , 0)}';",
    "aux:dim5 = TABDIM( vName:sCubeName, 5);",
    "aux:mdx5 = '{TM1FILTERBYLEVEL(TM1SUBSETALL(['|aux:dim5|'].['|aux:dim5|']) , 0)}';",
    "aux:dim6 = TABDIM( vName:sCubeName, 6);",
    "aux:mdx6 = '{TM1FILTERBYLEVEL(TM1SUBSETALL(['|aux:dim6|'].['|aux:dim6|']) , 0)}';",
    "aux:dim7 = TABDIM( vName:sCubeName, 7);",
    "aux:mdx7 = '{TM1FILTERBYLEVEL(TM1SUBSETALL(['|aux:dim7|'].['|aux:dim7|']) , 0)}';",
    "aux:dim8 = TABDIM( vName:sCubeName, 8);",
    "aux:mdx8 = '{TM1FILTERBYLEVEL(TM1SUBSETALL(['|aux:dim8|'].['|aux:dim8|']) , 0)}';",
    "ViewExtractSkipCalcsSet( vName:sCubeName, aux:ViewName, 1 );",
    "ViewExtractSkipRuleValuesSet( vName:sCubeName, aux:ViewName, 1 );",
    "ViewExtractSkipZeroesSet( vName:sCubeName, aux:ViewName, 1 );",
    "if(SubsetExists( aux:dim1, aux:SubName ) = 1);",
    "    SubsetDestroy( aux:dim1, aux:SubName );",
    "endif;",
    "SubsetCreatebyMDX(aux:SubName, aux:mdx1, aux:dim1,vName:nTmp);",
    "ViewSubsetAssign( vName:sCubeName, aux:ViewName, aux:dim1, aux:SubName );",
    "if(SubsetExists( aux:dim2, aux:SubName ) = 1);",
    "    SubsetDestroy( aux:dim2, aux:SubName );",
    "endif;",
    "SubsetCreatebyMDX(aux:SubName, aux:mdx2, aux:dim2, vName:nTmp);",
    "ViewSubsetAssign( vName:sCubeName, aux:ViewName, aux:dim2, aux:SubName );",
    "if(SubsetExists( aux:dim3, aux:SubName ) = 1);",
    "    SubsetDestroy( aux:dim3, aux:SubName );",
    "endif;",
    "SubsetCreatebyMDX(aux:SubName, aux:mdx3, aux:dim3, vName:nTmp);",
    "ViewSubsetAssign( vName:sCubeName, aux:ViewName, aux:dim3, aux:SubName );",
    "if(SubsetExists( aux:dim4, aux:SubName ) = 1);",
    "    SubsetDestroy( aux:dim4, aux:SubName );",
    "endif;",
    "SubsetCreatebyMDX(aux:SubName, aux:mdx4, aux:dim4,vName:nTmp);",
    "ViewSubsetAssign( vName:sCubeName, aux:ViewName, aux:dim4, aux:SubName );",
    "if(SubsetExists( aux:dim5, aux:SubName ) = 1);",
    "    SubsetDestroy( aux:dim5, aux:SubName );",
    "endif;",
    "SubsetCreatebyMDX(aux:SubName, aux:mdx5, aux:dim5,vName:nTmp);",
    "ViewSubsetAssign( vName:sCubeName, aux:ViewName, aux:dim5, aux:SubName );",
    "if(SubsetExists( aux:dim6, aux:SubName ) = 1);",
    "    SubsetDestroy( aux:dim6, aux:SubName );",
    "endif;",
    "SubsetCreatebyMDX(aux:SubName, aux:mdx6, aux:dim6,vName:nTmp);",
    "ViewSubsetAssign( vName:sCubeName, aux:ViewName, aux:dim6, aux:SubName );",
    "if(SubsetExists( aux:dim7, aux:SubName ) = 1);",
    "    SubsetDestroy( aux:dim7, aux:SubName );",
    "endif;",
    "SubsetCreatebyMDX(aux:SubName, aux:mdx7, aux:dim7,vName:nTmp);",
    "ViewSubsetAssign( vName:sCubeName, aux:ViewName, aux:dim7, aux:SubName );",
    "if(SubsetExists( aux:dim8, aux:SubName ) = 1);",
    "    SubsetDestroy( aux:dim8, aux:SubName );",
    "endif;",
    "SubsetCreatebyMDX(aux:SubName, aux:mdx8, aux:dim8,vName:nTmp);",
    "ViewSubsetAssign( vName:sCubeName, aux:ViewName, aux:dim8, aux:SubName );",
    "#EndRegion"
  ]
}
